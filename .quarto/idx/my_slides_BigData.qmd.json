{"title":"Las energías en Europa","markdown":{"yaml":{"title":"Las energías en Europa","date":"2022-12-23","date-format":"short","format":{"revealjs":{"scrollable":true,"slide-level":2,"height":900,"width":1600,"toc":false,"center-title-slide":true,"title-slide-attributes":{"data-background-color":"#036f7b"},"preview-links":"auto","link-external-newwindow":true,"transition":"fade","fontcolor":"#262d36","highlight-style":"a11y","code-line-numbers":true,"number-sections":false,"slide-number":"c/t","incremental":false}},"footer":"Slides hechas con [Quarto](https://quarto.org/)\n"},"headingText":"Contexto","headingAttr":{"id":"","classes":[],"keyvalue":[["background-color","#036f7b"]]},"containsRefs":false,"markdown":"\n\n\nCon nuestro trabajo pretendemos obtener una visión general de la situación energética actual en Europa.\n\nSobre todo porque, con el calentamiento global y la guerra de Ucrania, las energías se han convertido últimamente en un tema muy controvertido. Los Estados intentan cada vez más reducir su consumo y utilizar energías renovables.\n\nAsí, examinaremos varios puntos:\n\n## Introducción {background-color=\"#036f7b\"}\n\n1.  El consumo de las energías\n2.  Los tipos de energías utilizadas\n3.  La producción de energías\n4.  Los precios de las energías\n\n```{r}\n#| echo: false\nmy_url <- \"https://www.terrain-construction.com/content/wp-content/uploads/2019/01/Maison-et-Energies-Renouvelables.jpg\"\n```\n\n![](https://www.terrain-construction.com/content/wp-content/uploads/2019/01/Maison-et-Energies-Renouvelables.jpg)\n\n::: aside\nLos datos vienen de Eurostat\n:::\n\n\n```{r}\n#| code-fold: true\n\n#Paquetes utilizados en el trabajo \nlibrary(readr)\nlibrary(tidyverse)\nlibrary(plotly)\nlibrary(knitr)\nlibrary(eurostat)\nlibrary(gganimate)\n\n\n#Datos utilizados\ntable_data <- \"nrg_bal_s\"\ntable_datar <- \"nrg_ind_ren\"\ntable_fosil <- \"nrg_ind_ffgae\"\ntable_combustible <- \"nrg_inf_epc\"\ntable_rw <- \"nrg_inf_epc\"\ntable_renewables<- \"nrg_inf_epcrw\"\ntable_consumo <- \"nrg_cb_sff\"\ntable_consumoR <- \"nrg_cb_rw\"\ntable_gas <- \"nrg_pc_202\"  #DESDE 2007 (GAS)\ntable_gas07 <- \"nrg_pc_202_h\"  #ANTES DEL 2007 (GAS)\ntable_elec <- \"nrg_pc_204\"  #DESDE 2007 (ELECTRICIDAD)\ntable_elec07 <- \"nrg_pc_204_h\"  #ANTES DE 2007 (ELECTRICIDAD)\ntable_consumoG <- \"nrg_cb_gas\"  #GAS\ntable_consumoE <- \"nrg_cb_e\"  #ELECTRICIDAD\ntable_inflation <- \"tec00118\"  #INFLACION de 2010 a 2021\n\n#transformamos los datos\nlabel_eurostat_tables(table_data)\ndata <- get_eurostat(table_data, time_format = 'raw', keepFlags = TRUE)\ndf_namesD <- names(data)\ndata <- label_eurostat(data, code = df_namesD, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(data)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(data)\ndata[data == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndata <- data %>% \n  filter(nrg_bal == \"Total energy supply\",\n         geo %in% paises,\n         siec == \"Total\",\n         unit == \"Thousand tonnes of oil equivalent\") %>%\n  select(time, geo, values) %>%\n  mutate(time = as.numeric(time))\ncolnames(data) <- c(\"year\", \"country\", \"value\")\n\n\nlabel_eurostat_tables(table_datar)\ndatar<- get_eurostat(table_datar, time_format = 'raw', keepFlags = TRUE)\ndf_namesDr <- names(datar)\ndatar <- label_eurostat(datar, code = df_namesDr, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(datar)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(datar)\ndatar[datar == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndatar <- datar %>% \n  filter(nrg_bal == \"Renewable energy sources\") %>%\n  filter(geo %in% paises) %>% \n  select(time, geo, values) %>% \n  mutate(time =  as.numeric(time))\ncolnames(datar) <- c(\"year\", \"country\", \"value\")\n\n\nlabel_eurostat_tables(table_fosil)\ndfFosil <- get_eurostat(table_fosil, time_format = 'raw', keepFlags = TRUE)\ndf_namesFosil <- names(dfFosil)\ndfFosil <- label_eurostat(dfFosil, code = df_namesFosil, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(dfFosil)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(dfFosil)\ndfFosil[dfFosil == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\nstr(dfFosil) #Esta como numero VALUES\ndfFosil <- dfFosil %>% mutate(time =  as.numeric(time))\ndfFosil <- dfFosil %>% \n  select(time, geo, values) %>% \n  filter(geo %in% paises)\n#paises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\n\n\nlabel_eurostat_tables(table_combustible)\ndf <- get_eurostat(table_combustible, time_format = 'raw', keepFlags = TRUE)\ndf_names <- names(df)\ndf <- label_eurostat(df, code = df_names, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(df)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(df)\nrm(df_dicc, df_uniques)\ndf[df == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndfEngFos <- df %>% filter (siec == c(\"Nuclear fuels and other fuels n.e.c.\", \"Combustible fuels\"),\n                   geo %in% paises) %>%\n  select(time,geo,unit, values, operator) %>%\n  mutate(time = as.numeric(time)) %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values)) %>% \n  filter(Total != 0)\ncolnames(dfEngFos) <- c(\"pais\", \"anyo\", \"fosiles\")\n\n\n\nlabel_eurostat_tables(table_rw)\ndf_rw<- get_eurostat(table_rw, time_format = 'raw', keepFlags = TRUE)\ndf_namesrw <- names(df_rw)\ndf_rw <- label_eurostat(df_rw, code = df_namesrw, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(df_rw)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(df_rw)\nrm(df_dicc, df_uniques)\ndf_rw[df_rw == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\neng_rw <- c(\"Tide, wave, ocean\", \"Solar photovoltaic\",\n            \"Solar thermal\", \"Wind\", \"Geothermal\",\n            \"Pumped hydro power\", \"Mixed hydro power\",\n            \"Pure hydro power\", \"Hydro\")\ndfEngR <- df_rw %>% filter (siec %in% eng_rw,\n                           geo %in% paises) %>%\n  select(time,geo,unit, values, operator) %>%\n  mutate(time = as.numeric(time)) %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values)) %>% \n  filter(Total != 0)\ncolnames(dfEngR) <- c(\"pais\", \"anyo\", \"fosiles\")\n\n\nlabel_eurostat_tables(table_consumo)\ndf_consumo<- get_eurostat(table_consumo, time_format = 'raw', keepFlags = TRUE)\ndf_namesC <- names(df_consumo)\ndf_consumo <- label_eurostat(df_consumo, code = df_namesC, fix_duplicated = TRUE)\ndf_diccC <- pjpv.curso.R.2022::pjp_dicc(df_consumo)\ndf_uniquesC <- pjpv.curso.R.2022::pjp_valores_unicos(df_consumo)\nrm(df_diccC, df_uniquesC)\ndf_consumo[df_consumo == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndf_consumo <- df_consumo %>% select(time, geo, values, siec)\nstr(df_consumo)\ndf_consumo <- df_consumo %>% mutate(time =  as.numeric(time))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndf_consumo <- df_consumo %>%\n  filter (geo %in% paises) %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values))\ncolnames(df_consumo) <- c(\"pais\", \"anyo\", \"consumo total de energias no renovables\")\n\n\n\nlabel_eurostat_tables(table_consumoR)\ndf_consumoR <- get_eurostat(table_consumoR, time_format = 'raw', keepFlags = TRUE)\ndf_namesCR <- names(df_consumoR)\ndf_consumoR <- label_eurostat(df_consumoR, code = df_namesCR, fix_duplicated = TRUE)\ndf_diccCR <- pjpv.curso.R.2022::pjp_dicc(df_consumoR)\ndf_uniquesCR <- pjpv.curso.R.2022::pjp_valores_unicos(df_consumoR)\nrm(df_diccCR, df_uniquesCR)\ndf_consumoR[df_consumoR == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndf_consumoR <- df_consumoR %>% select(time, geo, values, siec)\nstr(df_consumoR)\ndf_consumoR <- df_consumoR %>% mutate(time =  as.numeric(time))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndf_consumoR <- df_consumoR %>%\n  filter (geo %in% paises) %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values))\ncolnames(df_consumoR) <- c(\"pais\", \"anyo\", \"consumo total de energias renovables\")\n\n\n\nlabel_eurostat_tables(table_gas)\ndfGas <- get_eurostat(table_gas, time_format = 'raw', keepFlags = TRUE)\ndf_namesGas <- names(dfGas)\ndfGas <- label_eurostat(dfGas, code = df_namesGas, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(dfGas)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(dfGas)\nrm(df_dicc, df_uniques)\ndfGas[dfGas == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndfGas <- dfGas %>% mutate(time =  as.numeric(time_code))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndfGas <- dfGas %>%\n  filter(tax == \"Excluding taxes and levies\",\n         currency == \"Euro\",\n         unit == \"Gigajoule (gross calorific value - GCV)\",\n         geo %in% paises) %>%\n  mutate(fecha = lubridate::yq(time_code)) %>% \n  mutate(periodo = lubridate::year(fecha)) %>%\n  select(periodo,geo, geo_code,unit, currency, values, consom) %>% \n  group_by(geo, periodo, geo_code) %>%\n  summarise(Total = sum(values)) %>%\n  filter(periodo > 2007)\n\n\nlabel_eurostat_tables(table_gas07)\ndfGas07 <- get_eurostat(table_gas07, time_format = 'raw', keepFlags = TRUE)\ndf_namesGas07 <- names(dfGas07)\ndfGas07 <- label_eurostat(dfGas07, code = df_namesGas07, fix_duplicated = TRUE)\ndf_dicc07 <- pjpv.curso.R.2022::pjp_dicc(dfGas07)\ndf_uniques07 <- pjpv.curso.R.2022::pjp_valores_unicos(dfGas07)\nrm(df_dicc07, df_uniques07)\ndfGas07[dfGas07 == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndfGas07 <- dfGas07 %>% mutate(time =  as.numeric(time_code))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndfGas07 <- dfGas07 %>%\n  filter(tax == \"Excluding taxes and levies\",\n         currency == \"Euro\",\n         unit == \"Gigajoule (gross calorific value - GCV)\",\n         geo %in% paises) %>%\n  mutate(fecha = lubridate::yq(time_code)) %>% \n  mutate(periodo = lubridate::year(fecha))  %>%\n  select(periodo,geo, geo_code,unit, currency, values, consom) %>% \n  group_by(geo, periodo, geo_code) %>%\n  summarise(Total = sum(values)) %>%\n  filter(periodo < 2008)\n \n\n\n\nlabel_eurostat_tables(table_elec)\ndfElec <- get_eurostat(table_elec, time_format = 'raw', keepFlags = TRUE)\ndf_namesElec <- names(dfElec)\ndfElec <- label_eurostat(dfElec, code = df_namesElec, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(dfElec)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(dfElec)\nrm(df_dicc, df_uniques)\ndfElec[dfElec == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndfElec <- dfElec %>% mutate(time =  as.numeric(time_code))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndfElec <- dfElec %>%\n  filter(tax == \"Excluding taxes and levies\",\n         currency == \"Euro\",\n         consom != \"Consumption of kWh - all bands\",\n         geo %in% paises) %>%\n  mutate(fecha = lubridate::yq(time_code)) %>% \n  mutate(periodo = lubridate::year(fecha)) %>%\n  select(periodo, geo, geo_code, unit, currency, values, consom) %>% \n  group_by(geo, periodo, geo_code) %>%\n  summarise(Total = sum(values)) %>%\n  filter(periodo > 2007)\n\n\n\nlabel_eurostat_tables(table_elec07)\ndfElec07 <- get_eurostat(table_elec07, time_format = 'raw', keepFlags = TRUE)\ndf_namesElec07 <- names(dfElec07)\ndfElec07 <- label_eurostat(dfElec07, code = df_namesElec07, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(dfElec07)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(dfElec07)\nrm(df_dicc, df_uniques)\ndfElec07[dfElec07 == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndfElec07 <- dfElec07 %>% mutate(time =  as.numeric(time_code))\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\ndfElec07 <- dfElec07 %>%\n  filter(tax == \"Excluding taxes and levies\",\n         currency == \"Euro\",\n         consom != \"Consumption of kWh - all bands\",\n         geo %in% paises) %>%\n  mutate(fecha = lubridate::yq(time_code)) %>% \n  mutate(periodo = lubridate::year(fecha)) %>%\n  select(periodo, geo, geo_code, unit, currency, values, consom) %>% \n  group_by(geo, periodo, geo_code) %>%\n  summarise(Total = sum(values)) %>%\n  filter(periodo < 2008)\n\n\n\nlabel_eurostat_tables(table_consumoG)\ndf_consumoG <- get_eurostat(table_consumoG, time_format = 'raw', keepFlags = TRUE)\ndf_namesG <- names(df_consumoG)\ndf_consumoG <- label_eurostat(df_consumoG, code = df_namesG, fix_duplicated = TRUE)\ndf_diccCG <- pjpv.curso.R.2022::pjp_dicc(df_consumoG)\ndf_uniquesCG <- pjpv.curso.R.2022::pjp_valores_unicos(df_consumoG)\nrm(df_diccCG, df_uniquesCG)\ndf_consumoG[df_consumoG == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\nstr(df_consumoG)\ndf_consumoG <- df_consumoG %>% mutate(time =  as.numeric(time))\ndf_consumoG <- df_consumoG %>% \n  filter(unit == \"Terajoule (gross calorific value - GCV)\") %>%\n  select(time, geo, values, siec, unit) %>%\n  filter(geo %in% paises)  %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values))\n\n\n\nlabel_eurostat_tables(table_consumoE)\ndf_consumoE <- get_eurostat(table_consumoE, time_format = 'raw', keepFlags = TRUE)\ndf_namesE <- names(df_consumoE)\ndf_consumoE <- label_eurostat(df_consumoE, code = df_namesE, fix_duplicated = TRUE)\ndf_diccCE <- pjpv.curso.R.2022::pjp_dicc(df_consumoE)\ndf_uniquesCE <- pjpv.curso.R.2022::pjp_valores_unicos(df_consumoE)\nrm(df_diccCE, df_uniquesCE)\ndf_consumoE[df_consumoE == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\nstr(df_consumoE)\ndf_consumoE <- df_consumoE %>% mutate(time =  as.numeric(time))\ndf_consumoE <- df_consumoE %>%\n  select(time, geo, values, siec, unit) %>%\n  filter(geo %in% paises)  %>%\n  group_by(geo, time) %>%\n  summarise(Total = sum(values))\n\n\n\nlabel_eurostat_tables(table_inflation)\ndf_inflation <- get_eurostat(table_inflation, time_format = 'raw', keepFlags = TRUE)\ndf_namesInf <- names(df_inflation)\ndf_inflation <- label_eurostat(df_inflation, code = df_namesInf, fix_duplicated = TRUE)\ndf_dicc <- pjpv.curso.R.2022::pjp_dicc(df_inflation)\ndf_uniques <- pjpv.curso.R.2022::pjp_valores_unicos(df_inflation)\nrm(df_dicc, df_uniques)\ndf_inflation[df_inflation == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\npaises <- c(\"Spain\",\"France\", \"Sweden\", \"Denmark\", \"Italy\", \"Norway\", \"Germany\")\nstr(df_inflation)\ndf_inflation <- df_inflation %>% mutate(time =  as.numeric(time))\ndf_inflation0 <- df_inflation %>%\n  select(time, geo, geo_code, values) %>%\n  filter(geo %in% paises)\ncolnames(df_inflation0) <- c(\"Anyo\", \"Pais\", \"geo_code\",\"Inflacion\")\n```\n\n------------------------------------------------------------------------\n\n\n## El consumo de las energías globales {background-color=\"#036f7b\"}\n\n------------------------------------------------------------------------\n\n### La evolución del consumo de energías\n\n\n\n```{r}\n#| echo: false\noptions(scipen = 999)\np1 <- data %>% ggplot(aes(x = year, y = value, color = country))+ \n   geom_point()+ geom_line(aes(color = country))+\n  geom_smooth(color = \"purple\")+\n  labs(title = \"Gráfico 1: Evolución del uso de energías en países elegidos\",\n      subtitle = \"(total energy supply)\",\n      caption = \"Datos provenientes de Eurostat\",\n      x = \"Años\",\n      y = \"Tonelada equivalente de petróleo\") \n\nplotly::ggplotly(p1)\n```\n\n::: aside\nTonelada equivalente de petróleo : unidad de medida del consumo de (41 868 000 000 J (julios) = 11 630 kWh (kilovatios-hora))\n:::\n\n------------------------------------------------------------------------\n\n### Comparación del consumo de las energías para cada año\n\n```{r}\n#| echo: false\np2 <- data %>% filter(year >=2010) %>% ggplot(aes(x = reorder(country, -value), y=value, fill=country))+\n  geom_bar(stat=\"identity\")+\n  facet_wrap(~year)+\n  labs(title = \"Gráfico 2: Comparación del consumo de los países para cada año\",\n       subtitle = \"(2010-2020)\",\n       caption = \"Datos provenientes de Eurostat\") +\n  xlab(NULL) +\n  theme(axis.text.x = element_text(angle = 90, hjust = 1))\n\n\n\nplotly::ggplotly(p2)\n```\n\n------------------------------------------------------------------------\n\n### Países que más consumen\n\n```{r}\n#| echo: false\ndata1 <- read_csv(\"datos/nrg_bal_s_1_Data.csv\")\ndata1 <- data1 %>% filter(NRG_BAL == \"Total energy supply\")%>% filter(GEO != \"European Union - 27 countries (from 2020)\")%>% filter(GEO!=\"Euro area - 19 countries  (from 2015)\")%>% select(TIME, GEO, Value)\ndata1$Value <- gsub(\",\",\"\",data1$Value)\ndata1$Value <- as.numeric(data1$Value)\ncolnames(data1) <- c(\"year\", \"country\", \"value\")\ndata1[data1 == \"Germany (until 1990 former territory of the FRG)\"] <- \"Germany\"\ndata1[data1 == \"T<fc>rkiye\"] <- \"Turkey\"\ne3 <- data1 %>% filter(year == 2020)%>% slice_max(value, n=20)\n\ne3 %>%\n  knitr::kable() %>%\n  kableExtra::kable_styling(font_size = 11) %>%\n  kableExtra::scroll_box(width = \"100%\", height = \"10%\") %>%\n    kableExtra::kable_styling(fixed_thead = list(enabled = T, \n                                               background = \"#036f7b\"))\n```\n\n------------------------------------------------------------------------\n\n## El consumo según los tipos de energías {background-color=\"#036f7b\"}\n\n------------------------------------------------------------------------\n\n### Las energías renovables\n\n```{r}\n#| echo: false\n\np4 <- datar %>% ggplot(aes(x=year, y=value, color=country))+\n  geom_line()+\n  labs(title = \"Gráfico 4: Evolución del uso de energás renovables\",\n       subtitle = \"(en porcentages)\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Años\",\n       y = \"Porcentage de energías renovables\")\n\n\nplotly::ggplotly(p4)\n\n```\n\n------------------------------------------------------------------------\n\n### Las energías fósiles\n\n```{r}\n#| echo: false\np5 <- dfFosil %>% ggplot(aes(x= time, y= values, color= geo)) +\n  geom_line() +\n  labs(title = \"Gráfico 5: Evolución del uso de energias fosiles\",\n       subtitle = \"(en porcentajes)\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Year\",\n       y = \"Porcentage de energías no renovables\",\n       color = \"Paises\")\n\nplotly::ggplotly(p5) \n```\n\n------------------------------------------------------------------------\n\n### Comparación energías renovables/fósiles\n\n```{r}\n#| echo: false\ndf_inner <- inner_join(datar, dfFosil,by = c(\"year\" = \"time\", \"country\" = \"geo\"))\n\ncolnames(df_inner) <- c(\"anyo\", \"pais\", \"renovables\", \"fosiles\")\n\np6 <- df_inner %>% ggplot( aes(x = anyo)) +\n  geom_line(aes(y = renovables), color = \"green\") +\n  geom_line(aes(y = fosiles), color = \"grey\") + \n  facet_grid(vars(pais)) + \n  labs(title = \"Gráfico 6: Comparativa entre energias renovables y fosiles\",\n       subtitle = \"(en porcentajes)\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Year\",\n       y = \"Porcentaje\")\n\nplotly::ggplotly(p6)\n```\n\n------------------------------------------------------------------------\n\n## La producción según los tipos de energías {background-color=\"#036f7b\"}\n\n------------------------------------------------------------------------\n\n### Energias fósiles\n\n```{r}\n#| echo: false\np7 <- dfEngFos  %>%\n  ggplot(aes(x = anyo, y = fosiles, colour = pais)) +\n  geom_line() + \n  transition_reveal(anyo) +\n  labs(title = \"Gráfico 5: Producción de energias no renovables\",\n       subtitle = \"(en MWh)\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Year\",\n       y = \"Produccion de energías no renovables\",\n       color = \"Pais\")\n\np7\n```\n\n------------------------------------------------------------------------\n\n### Energías renovables\n\n```{r}\n#| echo: false\np8 <- dfEngR  %>%\n  ggplot(aes(x = anyo, y = fosiles, colour = pais)) +\n  geom_line() + \n  labs(title = \"Gráfico 6: Producción de energias renovables\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Year\",\n       y = \"Produccion de energías renovables\",\n       color = \"Pais\")\n\np8 + transition_reveal(anyo)\n```\n\n------------------------------------------------------------------------\n\n### Balance consumo/produccíon\n\n\n::: {.panel-tabset}\n\n## **Energías fósiles**\n```{r}\n#| echo: false\ndf_PyCengF <- inner_join(dfEngFos, df_consumo,by = c(\"pais\" = \"pais\", \"anyo\" = \"anyo\"))\n\ncolnames(df_PyCengF) <- c(\"pais\", \"anyo\", \"produccionEF\", \"consumoEF\")\n\nfactor <- 60\n\np9 <- df_PyCengF %>% \n  ggplot(aes(x=anyo, y = produccionEF)) + \n  geom_bar(stat = \"identity\", fill = \"skyblue\") + \n  geom_line(aes(y = consumoEF/factor)) + \n  scale_y_continuous(sec.axis = sec_axis(trans = ~.*factor,\n                                         name = \"Consumo\")) + \n  facet_wrap(vars(pais)) +\n  theme_light() + \n  labs(title = \"Gráfico 9: Balance consumo/produccion de energias fosiles\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Año\",\n       y = \"Produccion (MW)\")\n\n\nplotly::ggplotly(p9) \n\n```\n\n\n## **Energías renovables**\n\n```{r}\n#| echo: false\ndf_PyCengR <- inner_join(dfEngR, df_consumoR,by = c(\"pais\" = \"pais\", \"anyo\" = \"anyo\"))\n\ncolnames(df_PyCengR) <- c(\"pais\", \"anyo\", \"produccionER\", \"consumoER\")\n\nfactor <- 60\n\np10 <- df_PyCengR %>% \n  ggplot(aes(x=anyo, y = produccionER)) + \n  geom_bar(stat = \"identity\", fill = \"skyblue\") + \n  geom_line(aes(y = consumoER/factor)) + \n  scale_y_continuous(sec.axis = sec_axis(trans = ~.*factor,\n                                         name = \"Consumo\")) + \n  facet_wrap(vars(pais)) +\n  theme_light() + \n  labs(title = \"Gráfico 9: Balance consumo/produccion de energias renovables\",\n       caption = \"Datos provenientes de Eurostat\",\n       x = \"Año\",\n       y = \"Produccion (MW)\")\n\n\nplotly::ggplotly(p10)\n```\n\n:::\n------------------------------------------------------------------------\n\n## Los precios de las energías {background-color=\"#036f7b\"}\n\n------------------------------------------------------------------------\n\n### El gas\n\n```{r, echo = FALSE, eval = TRUE, include =  FALSE}\n#| echo: false\ndf_TotGas <- full_join(dfGas, dfGas07, by = c(\"geo\"=\"geo\",\"geo_code\" = \"geo_code\", \"periodo\"=\"periodo\",  \"Total\" = \"Total\"))\n\ncolnames(df_TotGas) <- c(\"Pais\", \"Anyo\", \"geo_code\",\"Precio\")\n\ndf_TotGasD <-  df_TotGas %>% group_by(Anyo) %>%  \n  mutate(values.x.q.b = as.factor(ntile(Precio, n = 5))) %>%\n  ungroup()\n\ngeometriasG <- get_eurostat_geospatial(resolution = \"20\", nuts_level = \"0\")\nplot(geometriasG, max.plot = 1)\n\nmapdataG <- inner_join(df_TotGasD, geometriasG, by = c(\"geo_code\" = \"id\"))\n\nmapdata_siG <- mapdataG %>%  filter(Anyo %in% c(2020, 2014, 2007, 1998))\n```\n\n```{r, message=FALSE}\n#| echo: false\np11 <- ggplot(mapdata_siG) +\n  geom_sf(aes(fill = values.x.q.b,  geometry = geometry), color = \"black\", size = .1) +\n  scale_fill_brewer(palette = \"Oranges\") + \n  facet_wrap(vars(Anyo)) +\n  labs(title = \"Grafico 10: Evolucion del precio del gas\",\n       fill = \"Precios\",\n       caption = \"(C) EuroGeographics for the administrative boundaries\") + theme_light() +\n  coord_sf(xlim = c(-12,30), ylim = c(35,70)) + theme(legend.text = element_text(family = \"mono\"),\n                                                      legend.title = element_text(face = \"bold\"),\n                                                      legend.background = element_rect(linetype = \"solid\"),\n                                                      legend.position = \"bottom\", legend.direction = \"horizontal\") +labs(subtitle = \"(Paises utilizados a lo largo del analisis)\")\n\np11\n```\n\n------------------------------------------------------------------------\n\n\n### La electricidad\n\n```{r, echo = FALSE, eval = TRUE, include =  FALSE}\n#| echo: false\n\ndf_TotElec <- full_join(dfElec, dfElec07, by = c(\"geo\"=\"geo\", \"geo_code\" = \"geo_code\",\"periodo\"=\"periodo\",  \"Total\" = \"Total\"))\n\ncolnames(df_TotElec) <- c(\"Pais\", \"Anyo\", \"geo_code\",\"Precio\")\n\ndf_TotElecD <-  df_TotElec %>% group_by(Anyo) %>%  \n  mutate(values.x.q.b = as.factor(ntile(Precio, n = 5))) %>%\n  ungroup()\n\ngeometrias <- get_eurostat_geospatial(resolution = \"20\", nuts_level = \"0\")\nplot(geometrias, max.plot = 1)\n\nmapdata <- inner_join(df_TotElecD, geometrias, by = c(\"geo_code\" = \"id\"))\n\nmapdata_si <- mapdata %>%  filter(Anyo %in% c(2020, 2014, 2007, 1998))\n```\n\n```{r, message=FALSE}\n#| echo: false\np12 <- ggplot(mapdata_si) +\n  geom_sf(aes(fill = values.x.q.b,  geometry = geometry), color = \"black\", size = .1) +\n  scale_fill_brewer(palette = \"Oranges\") + \n  facet_wrap(vars(Anyo)) +\n  labs(title = \"Evolucion del precio de la electricidad\",\n       fill = \"Precios\",\n       caption = \"(C) EuroGeographics for the administrative boundaries\") + theme_light() +\n  coord_sf(xlim = c(-12,30), ylim = c(35,70)) + theme(legend.text = element_text(family = \"mono\"),\n    legend.title = element_text(face = \"bold\"),\n    legend.background = element_rect(linetype = \"solid\"),\n    legend.position = \"bottom\", legend.direction = \"horizontal\") +labs(subtitle = \"(Paises utilizados a lo largo del analisis)\")\n\np12\n```\n\n------------------------------------------------------------------------\n\n### La correlación precios/inflación\n\n::: {.panel-tabset}\n\n## **Gas**\n\n```{r}\n#| echo: false\ndfG_inf_p <- inner_join(df_inflation0, df_TotGas,by = c(\"Anyo\" = \"Anyo\", \"Pais\" = \"Pais\", \"geo_code\" = \"geo_code\"))\n\ndfE_inf_p <- inner_join(df_inflation0, df_TotElec,by = c(\"Anyo\" = \"Anyo\", \"Pais\" = \"Pais\", \"geo_code\" = \"geo_code\"))\n\np13 <- dfG_inf_p %>% ggplot(aes(x = Inflacion, y = Precio, frame = Anyo)) + \n  geom_point(data = dfG_inf_p, aes(color = Anyo), size = 0.3) +\n  geom_text(aes(label = geo_code), nudge_x = 0.5) +\n  geom_smooth(method = \"lm\", se = FALSE) \n\np14 <- dfE_inf_p %>% ggplot(aes(x = Inflacion, y = Precio, frame = Anyo)) + \n  geom_point(data = dfE_inf_p, aes(color = Anyo), size = 0.3) +\n  geom_text(aes(label = geo_code), nudge_x = 0.5) +\n  geom_smooth(method = \"lm\", se = FALSE) \n``` \n  \n```{r,echo = FALSE, message = FALSE}\n#| echo: false\nplotly::ggplotly(p13)\n```\n\n\n\n## **Electricidad**\n\n```{r,echo = FALSE, message = FALSE}\n#| echo: false\nplotly::ggplotly(p14)\n```\n\n:::\n\n------------------------------------------------------------------------\n\n## Conclusíon {background-color=\"#036f7b\"}\n\n- Aunque el consumo global de energía se ha mantenido relativamente estable durante los años, los tipos de energías consumidas han combiado. El consumo y la producción de energías renovables han aumentado, mientras que el consumo de combustibles fósiles ha disminuido un poco. \nEsto es muy positivo para el futuro, pero aún los países tienen que hacer esfuerzos, sobre todo en la producción de combustibles fósiles, que sigue siendo importante.\n\n- No observamos una relación entre el consumo y la producción de combustibles fósiles. Esto se debe a que la producción es muy grande, por lo que hay muchas importaciones y exportaciones.\nSin embargo, esto es muy diferente en el caso de las energías renovables. Los países suelen consumir su propia producción porque es baja.\n\n- En cuanto a la relación precio/inflación, la relación parece bastante clara para la mayoría de países. Y es que cuando aumenta la inflación, aumentan los precios, ya sean de gas o de electricidad, y durante uno o dos años, esto se ajustan los precios. Caso contrario si cae la inflación.\n\n------------------------------------------------------------------------\n\n## ¡¡¡Gracias por su atención y feliz navidad!!!\n\n```{r}\n#| echo: false\nmy_url <- \"https://www.fete-ecoles.fr/media/k2/items/cache/a6026d97db0c19ba76f2c5c141efd324_XL.jpg\"\n```\n\n![](https://www.fete-ecoles.fr/media/k2/items/cache/a6026d97db0c19ba76f2c5c141efd324_XL.jpg)\n\n\n------------------------------------------------------------------------\n"},"formats":{"revealjs":{"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","toc":false,"highlight-style":"a11y","number-sections":false,"incremental":false,"output-file":"my_slides_BigData.html"},"language":{},"metadata":{"lang":"es","fig-responsive":false,"quarto-version":"1.2.269","auto-stretch":true,"license":"CC BY","title":"Las energías en Europa","date":"2022-12-23","date-format":"short","footer":"Slides hechas con [Quarto](https://quarto.org/)\n","scrollable":true,"height":900,"width":1600,"center-title-slide":true,"title-slide-attributes":{"data-background-color":"#036f7b"},"previewLinks":"auto","transition":"fade","fontcolor":"#262d36","slideNumber":"c/t"}}}}